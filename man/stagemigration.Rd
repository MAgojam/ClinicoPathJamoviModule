% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/stagemigration.h.R
\name{stagemigration}
\alias{stagemigration}
\title{Stage Migration Analysis}
\usage{
stagemigration(
  data,
  oldStage,
  newStage,
  survivalTime,
  event,
  eventLevel,
  plotMigration = TRUE,
  survivalPlotType = "separate",
  showCI = FALSE,
  showWillRogers = TRUE
)
}
\arguments{
\item{data}{The dataset containing staging and survival information.}

\item{oldStage}{The original staging variable. This represents the staging
system used before the revision or change (e.g., TNM 7th edition).}

\item{newStage}{The new staging variable. This represents the revised or
changed staging system (e.g., TNM 8th edition).}

\item{survivalTime}{The survival or follow-up time variable. This should be
a numeric variable representing time in consistent units (e.g., months).}

\item{event}{The event indicator variable. This can be a factor or numeric
variable indicating whether the event of interest (e.g., death) occurred.}

\item{eventLevel}{The level of the event variable that indicates the event
occurred. This is required if the event variable is a factor.}

\item{plotMigration}{Enable to display an alluvial/Sankey plot visualizing
stage migration patterns. This plot shows how patients move between stages
in the old and new systems.}

\item{survivalPlotType}{Controls how survival curves are displayed for
comparing staging systems. "Separate" shows full KM plots for each system,
while "Side by side"  focuses on direct stage comparisons.}

\item{showCI}{Enable to display 95\\% confidence intervals around survival
curves.}

\item{showWillRogers}{Enable to perform detailed analysis of the Will
Rogers phenomenon. This will compare survival within stages between
patients who migrated and those who didn't.}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$todo} \tab \tab \tab \tab \tab a html \cr
\code{results$migrationSummary} \tab \tab \tab \tab \tab a table \cr
\code{results$stageDistribution} \tab \tab \tab \tab \tab a table \cr
\code{results$migrationTable} \tab \tab \tab \tab \tab a table \cr
\code{results$survivalComparison} \tab \tab \tab \tab \tab a table \cr
\code{results$stagingPerformance} \tab \tab \tab \tab \tab a table \cr
\code{results$migrationPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$survivalPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$concordancePlot} \tab \tab \tab \tab \tab an image \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$migrationSummary$asDF}

\code{as.data.frame(results$migrationSummary)}
}
\description{
Analyzes staging system changes and the "Will Rogers Phenomenon" in disease
staging.  This analysis compares staging distributions before and after a
staging system change, quantifies stage migration, and evaluates changes in
prognostic performance.
}
\examples{
\donttest{
# Example analyzing migration between TNM staging editions:
# stagemigration(
#   data = patient_data,
#   oldStage = "tnm7_stage",
#   newStage = "tnm8_stage",
#   survivalTime = "follow_up_months",
#   event = "death_status",
#   eventLevel = "Dead"
# )
}
}
