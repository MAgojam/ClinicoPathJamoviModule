% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tree.h.R
\name{tree}
\alias{tree}
\title{Medical Decision Tree}
\usage{
tree(
  data,
  vars,
  facs,
  target,
  targetLevel,
  train,
  trainLevel,
  imputeMissing = FALSE,
  balanceClasses = FALSE,
  scaleFeatures = FALSE,
  clinicalMetrics = FALSE,
  featureImportance = FALSE,
  showInterpretation = FALSE,
  showPlot = FALSE,
  showPartitionPlot = FALSE,
  minCases = 10,
  maxDepth = 4,
  confidenceInterval = FALSE,
  riskStratification = FALSE,
  exportPredictions = FALSE,
  clinicalContext = "diagnosis",
  costRatio = 1,
  prevalenceAdjustment = FALSE,
  expectedPrevalence = 10,
  crossValidation = FALSE,
  cvFolds = 5,
  bootstrapValidation = FALSE,
  bootstrapSamples = 1000,
  showROCCurve = FALSE,
  showCalibrationPlot = FALSE,
  showClinicalUtility = FALSE,
  variableImportanceMethod = "frequency",
  customThresholds = FALSE,
  sensitivityThreshold = 0.8,
  specificityThreshold = 0.8,
  treeVisualization = "standard",
  showNodeStatistics = FALSE,
  compareModels = FALSE,
  spatialCoords,
  useAutocart = FALSE,
  spatialAlpha = 0.5,
  spatialBeta = 0.5,
  modelComparisonMetric = "bacc"
)
}
\arguments{
\item{data}{The data as a data frame containing clinical variables,
biomarkers,  and patient outcomes.}

\item{vars}{Continuous variables such as biomarker levels, age,  laboratory
values, or quantitative pathological measurements.}

\item{facs}{Categorical variables such as tumor grade, stage,  histological
type, or patient demographics.}

\item{target}{Primary outcome variable: disease status, treatment response,
survival status, or diagnostic category.}

\item{targetLevel}{Level representing disease presence, positive outcome,
or event of interest.}

\item{train}{Variable indicating training vs validation cohorts.  If not
provided, data will be split automatically.}

\item{trainLevel}{Level indicating the training/discovery cohort.}

\item{imputeMissing}{Impute missing values using medically appropriate
methods  (median within disease groups for continuous, mode for
categorical).}

\item{balanceClasses}{Balance classes to handle rare diseases or imbalanced
outcomes.  Recommended for disease prevalence <20\\%.}

\item{scaleFeatures}{Standardize continuous variables (useful when
combining  biomarkers with different scales/units).}

\item{clinicalMetrics}{Display sensitivity, specificity, predictive values,
likelihood ratios, and other clinical metrics.}

\item{featureImportance}{Identify most important clinical variables and
biomarkers  for the decision tree.}

\item{showInterpretation}{Provide clinical interpretation of results
including  diagnostic utility and clinical recommendations.}

\item{showPlot}{Display visual representation of the decision tree.}

\item{showPartitionPlot}{Display 2D decision boundary visualization using
parttree.  Requires exactly 2 continuous variables for optimal
visualization.}

\item{minCases}{Minimum number of cases required in each terminal node
(higher values prevent overfitting).}

\item{maxDepth}{Maximum depth of decision tree (deeper trees may overfit).}

\item{confidenceInterval}{Display confidence intervals for performance
metrics.}

\item{riskStratification}{Analyze risk stratification performance and
create  risk categories based on tree predictions.}

\item{exportPredictions}{Add predicted classifications and probabilities to
the dataset.}

\item{clinicalContext}{Clinical context affects interpretation thresholds
and  recommendations (e.g., screening requires high sensitivity).}

\item{costRatio}{Relative cost of missing a case vs false alarm.  Higher
values favor sensitivity over specificity.}

\item{prevalenceAdjustment}{Adjust predictive values for expected disease
prevalence  in target population (different from study sample).}

\item{expectedPrevalence}{Expected disease prevalence in target population
for  adjusted predictive value calculations.}

\item{crossValidation}{Perform k-fold cross-validation for robust
performance estimation.}

\item{cvFolds}{Number of folds for cross-validation (typically 5 or 10).}

\item{bootstrapValidation}{Perform bootstrap validation for confidence
intervals on performance metrics.}

\item{bootstrapSamples}{Number of bootstrap samples for confidence interval
calculation.}

\item{showROCCurve}{Display ROC curve with AUC for model discrimination
assessment.}

\item{showCalibrationPlot}{Display probability calibration plot to assess
prediction reliability.}

\item{showClinicalUtility}{Display clinical utility curve for threshold
optimization.}

\item{variableImportanceMethod}{Method for calculating variable importance
in decision trees.}

\item{customThresholds}{Set custom thresholds for clinical performance
interpretation.}

\item{sensitivityThreshold}{Minimum sensitivity threshold for clinical
acceptability.}

\item{specificityThreshold}{Minimum specificity threshold for clinical
acceptability.}

\item{treeVisualization}{Style of decision tree visualization display.}

\item{showNodeStatistics}{Display detailed statistics at each decision tree
node.}

\item{compareModels}{Compare FFTrees performance with logistic regression,
CART, and autocart (if spatial coordinates provided).}

\item{spatialCoords}{X and Y coordinates for spatial analysis. Required for
autocart spatial regression trees. Typically longitude/latitude or tissue
microarray coordinates.}

\item{useAutocart}{Enable spatial-aware regression trees using autocart
methodology. Requires spatial coordinates (X, Y variables).}

\item{spatialAlpha}{Weight for spatial autocorrelation in autocart
splitting (0.0-1.0). Higher values emphasize spatial clustering in decision
tree splits.}

\item{spatialBeta}{Weight for spatial compactness in autocart splitting
(0.0-1.0). Higher values favor spatially compact regions in tree
partitions.}

\item{modelComparisonMetric}{Primary metric for comparing model
performance.}
}
\value{
A results object containing:
\tabular{llllll}{
\code{results$todo} \tab \tab \tab \tab \tab a html \cr
\code{results$text1} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$text2} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$text2a} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$text2b} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$text3} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$text4} \tab \tab \tab \tab \tab a html \cr
\code{results$dataQuality} \tab \tab \tab \tab \tab a preformatted \cr
\code{results$missingDataReport} \tab \tab \tab \tab \tab a table \cr
\code{results$modelSummary} \tab \tab \tab \tab \tab a html \cr
\code{results$clinicalMetrics} \tab \tab \tab \tab \tab a table \cr
\code{results$clinicalInterpretation} \tab \tab \tab \tab \tab a html \cr
\code{results$featureImportance} \tab \tab \tab \tab \tab a table \cr
\code{results$riskStratification} \tab \tab \tab \tab \tab a table \cr
\code{results$confusionMatrix} \tab \tab \tab \tab \tab a table \cr
\code{results$adjustedMetrics} \tab \tab \tab \tab \tab a table \cr
\code{results$crossValidationResults} \tab \tab \tab \tab \tab a table \cr
\code{results$bootstrapResults} \tab \tab \tab \tab \tab a table \cr
\code{results$modelComparison} \tab \tab \tab \tab \tab a table \cr
\code{results$spatialAnalysis} \tab \tab \tab \tab \tab a table \cr
\code{results$spatialInterpretation} \tab \tab \tab \tab \tab a html \cr
\code{results$plot} \tab \tab \tab \tab \tab an image \cr
\code{results$partitionPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$rocPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$calibrationPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$clinicalUtilityPlot} \tab \tab \tab \tab \tab an image \cr
\code{results$deploymentGuidelines} \tab \tab \tab \tab \tab a html \cr
\code{results$predictions} \tab \tab \tab \tab \tab an output \cr
\code{results$probabilities} \tab \tab \tab \tab \tab an output \cr
}

Tables can be converted to data frames with \code{asDF} or \code{\link{as.data.frame}}. For example:

\code{results$missingDataReport$asDF}

\code{as.data.frame(results$missingDataReport)}
}
\description{
Enhanced decision tree analysis for medical research, pathology and
oncology. Provides clinical performance metrics, handles missing data
appropriately, and offers interpretations relevant to medical
decision-making.
}
\examples{
# Example for cancer diagnosis
data(cancer_biomarkers)
tree(
    data = cancer_biomarkers,
    vars = c("PSA", "age", "tumor_size"),
    facs = c("grade", "stage"),
    target = "diagnosis",
    targetLevel = "cancer",
    train = "cohort",
    trainLevel = "discovery",
    imputeMissing = TRUE,
    balanceClasses = TRUE
)

}
